(this["webpackJsonpmusic-lesson-practice"]=this["webpackJsonpmusic-lesson-practice"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),l=n.n(c),i=(n(91),n(92),n(16)),o=n(138),u=n(139),s=n(145),m=n(130),d=n(146),p=n(75),f=n.n(p),E=n(76),b=n.n(E),h=n(17),v=n.n(h),g=n(28),w=n(74),O=n.n(w),j=n(144),y=n(135),k=n(136),C=n(137),x=n(78),I=n(56),S=n.n(I);n(94),n(104);S.a.initializeApp({apiKey:"AIzaSyB_xNt7pi_cH6wTCBq3AEuVtkqGLVt1xSI",authDomain:"music-lesson-practice.firebaseapp.com",databaseURL:"https://music-lesson-practice.firebaseio.com",projectId:"music-lesson-practice",storageBucket:"music-lesson-practice.appspot.com",messagingSenderId:"874537940387",appId:"1:874537940387:web:ccbf1eb5c3b57c5e159616",measurementId:"G-JEPN5SV529"});var N=S.a.firestore(),D=S.a.storage();function U(){return A.apply(this,arguments)}function A(){return(A=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection("videos").get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return Object(x.a)({id:e.id},e.data())})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n,a){var r=D.ref();r.child(e).put(n).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);a(t)}),(function(e){console.log(e)}),Object(g.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.child(e).getDownloadURL();case 2:return a=n.sent,console.log(a),n.next=6,N.collection("videos").add({title:e,description:t,fileUrl:a});case 6:case"end":return n.stop()}}),n)}))))}function B(e){return T.apply(this,arguments)}function T(){return(T=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection("videos").doc(t).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){var t=e.title,n=e.videoId,c=e.setNeedUpdating,l=Object(a.useState)(!1),o=Object(i.a)(l,2),u=o[0],s=o[1];function d(){return(d=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(n);case 2:s(!1),setTimeout((function(){c(!0)}),400);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{"aria-label":"delete",onClick:function(){return!u&&s(!0)}},r.a.createElement(O.a,null)),r.a.createElement(j.a,{open:u,onClose:function(){return s(!1)}},r.a.createElement(y.a,null,"Are you sure you want to delete ",r.a.createElement("i",null,t),"?",r.a.createElement("br",null),"This action cannot be undone."),r.a.createElement(k.a,null,r.a.createElement(C.a,{autoFocus:!0,onClick:function(){return s(!1)}},"Cancel"),r.a.createElement(C.a,{onClick:function(){return d.apply(this,arguments)},type:"button"},"Ok"))))},F=function(e){var t=e.video,n=e.setNeedUpdating,c=Object(a.useState)(!1),l=Object(i.a)(c,2),p=l[0],E=l[1],h=t.description?t.description:"No description available.";return r.a.createElement(o.a,{divider:!0,selected:!!p,alignItems:p?"flex-start":"center"},r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(f.a,null))),p?r.a.createElement("div",null,r.a.createElement("p",{style:{fontWeight:"bold"},onClick:function(){return E(!p)}},t.title),r.a.createElement("p",null,h),r.a.createElement(m.a,{"aria-label":"download",onClick:function(){t.fileUrl&&window.open(t.fileUrl,"_blank")}},r.a.createElement(b.a,null)),r.a.createElement(V,{title:t.title,videoId:t.id,setNeedUpdating:n})):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{disableTypography:!0,primary:t.title,secondary:p?h:null,onClick:function(){return E(!p)}}),r.a.createElement(V,{title:t.title,videoId:t.id,setNeedUpdating:n})))},L=n(140),q=n(10),_=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!0),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(a.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1];Object(a.useEffect)((function(){U().then((function(e){c(e),s(!1)}))}),[]),Object(a.useEffect)((function(){p&&(s(!0),U().then((function(e){c(e),s(!1),f(!1)})))}),[p]);var E=Object(q.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"primaryButton",fullWidth:!0,variant:"contained",margin:"normal",onClick:function(){return E.push("/music-lesson-practice/new")}},"ADD NEW VIDEO"),r.a.createElement("h2",null,"ALL VIDEOS"),r.a.createElement("p",null,"Click on one of the titles below to view description and download video."),u&&r.a.createElement(L.a,null),n.length>=1&&n.map((function(e){return r.a.createElement(F,{key:e.id,video:e,setNeedUpdating:f})})),!u&&0===n.length&&r.a.createElement("p",null,"Currently no videos available."))},G=n(142),J=n(147),M=n(141),z=n(77),R=n.n(z),H=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(a.useState)([]),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(a.useState)(),b=Object(i.a)(E,2),h=b[0],w=b[1],O=Object(q.f)();function j(){return(j=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),W(n,u,p,w);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){setTimeout((function(){100===h&&O.push("/music-lesson-practice/")}),1e3)}),[h,O]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"text",startIcon:r.a.createElement(R.a,null),disabled:h<100,onClick:function(){return O.push("/music-lesson-practice/")}},"Back"),r.a.createElement("h2",null,"ADDING A NEW VIDEO"),r.a.createElement("p",null,"Fill out the form below to add and upload a new video."),r.a.createElement("form",null,r.a.createElement(G.a,{label:"Title",fullWidth:!0,margin:"normal",required:!0,onChange:function(e){return c(e.target.value)}}),r.a.createElement(G.a,{label:"Description",multiline:!0,rows:4,variant:"outlined",fullWidth:!0,margin:"normal",onChange:function(e){return s(e.target.value)}}),r.a.createElement(J.a,{type:"file",label:"Video file",fullWidth:!0,required:!0,onChange:function(e){return f(e.target.files[0])}}),r.a.createElement(C.a,{className:"primaryButton",fullWidth:!0,variant:"contained",margin:"normal",type:"submit",disabled:h<100,onClick:function(e){return j.apply(this,arguments)}},"Upload"),h&&r.a.createElement(M.a,{variant:"determinate",value:h})))},K=n(46);var P=function(){return r.a.createElement(K.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"Al's Music Thing")),r.a.createElement("main",null,r.a.createElement(q.c,null,r.a.createElement(q.a,{path:"/music-lesson-practice/",exact:!0,component:_}),r.a.createElement(q.a,{path:"/music-lesson-practice/new",component:H})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,n){e.exports=n(103)},91:function(e,t,n){},92:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.4127c92e.chunk.js.map